<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Heladeria</title>
  <link rel="icon" href="Logo.png" type="image/png">
  <style>
  /* Estilo general para pantallas m√≥viles */
body {
    font-family: 'Arial', sans-serif;
    background: #fffbe6;
    color: #333;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  /* Asegura que todo use box-sizing: border-box */
  *, *::before, *::after {
    box-sizing: inherit;
  }
  
  h1 {
    text-align: center;
    color: #d63384;
    font-size: 1.6em;
    margin: 1em 0;
  }
  
  /* Contenedor del formulario */
  form {
    background: #fff;
    border-radius: 15px;
    padding: 1.5em 1em;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin: 0 auto;
    width: 95%;
    max-width: 420px;
  }
  
  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
    font-size: 1em;
  }
  
  input[type="text"],
  select,
  textarea {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1em;
  }
  
  .sabores-container {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap; /* Permite que se ajusten cuando no caben */
    gap: 10px;
    margin-top: 10px;
  }
  
  .sabor {
    background: #f9f9f9;
    border: 1px solid #ddd;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    text-align: left;
  }
  
  .sabor.selected {
    background-color: #d63384;
    color: white;
    border-color: #c1126f;
  }
  
  .boton {
    display: block;
    width: 100%;
    margin-top: 15px;
    background-color: #d63384;
    color: white;
    border: none;
    padding: 14px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    font-weight: bold;
    text-align: center;
    transition: background-color 0.2s ease;
  }
  
  .boton:hover {
    background-color: #b0266a;
  }
  
  #listaHelados {
    margin-top: 20px;
    background: #fff;
    padding: 1em;
    border-radius: 10px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
  }
  
  .total-general {
    text-align: center;
    font-weight: bold;
    margin-top: 15px;
    font-size: 1.1em;
  }
  
  #mensajeAlerta {
    color: red;
    font-size: 0.95em;
    margin-top: 5px;
    text-align: center;
  }
  
  /* Asegura una buena experiencia incluso en pantallas ultra peque√±as */
  @media screen and (max-width: 320px) {
    form {
      padding: 1em 0.5em;
    }
  }

  .logo-brincando {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 20px;
    margin: 20px auto;
    animation: slideBounceRight 1.2s ease-out, salto 1s ease-in-out 1.2s infinite;
  }
  

  @keyframes slideBounceRight {
    0% {
      opacity: 0;
      transform: translateX(100%); /* üëâ empieza desde la derecha */
    }
    60% {
      transform: translateX(-30%);
    }
    80% {
      transform: translateX(10%);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  
  @keyframes slideBounce {
    0% {
      opacity: 0;
      transform: translateX(-100%);
    }
    60% {
      transform: translateX(30%);
    }
    80% {
      transform: translateX(-10%);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes animarDegradado {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 100% 50%;
    }
  }
  
  @keyframes salto {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px);
    }
  }
  
  .contenedor-titulo {
    animation: slideBounce 1.2s ease-out;
    display: flex;
    justify-content: center;
  }
  
  .titulo-degradado {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 2.5em;
    margin: 1em 0;
    animation: salto 1s infinite ease-in-out 1.2s,
               animarDegradado 3s infinite alternate ease-in-out;
  
    background: linear-gradient(90deg, #ff0080, #7928ca, #2afadf, #ff0080);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  
  .precios-movil {
    background: #fff0f8;
    padding: 15px;
    border-radius: 15px;
    margin: 20px auto;
    width: 95%;
    box-shadow: 0 2px 6px rgba(255, 128, 171, 0.2);
    text-align: center;
    font-size: 1.05em;
  }
  
  .precios-movil h2 {
    color: #d63384;
    margin-bottom: 10px;
    font-size: 1.3em;
  }
  
  .precio-header,
  .precio-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 5px;
    border-radius: 8px;
    font-weight: bold;
  }
  
  .precio-header {
    background: #ffd6e8;
    color: #880044;
  }
  
  .precio-item {
    background: #ffe5f1;
    color: #5b005b;
    margin-top: 6px;
  }
  
  .precio-item span,
  .precio-header span {
    flex: 1;
    text-align: center;
  }
  
  .precio-item span.tam,
  .precio-header span.tam {
    flex: 1.4;
    text-align: left;
  }
  
  
      
  </style>
</head>
<body>

  <div class="contenedor-titulo">
    <h1 class="titulo-degradado">Helader√≠a EimyVall</h1>
  </div>
  
  <header style="text-align: center; margin: 20px 0;">
    <img src="Logo.png" alt="Logo Helader√≠a" class="logo-brincando">
  </header>


  <div class="precios-movil">
    <h2>üç¶ Precios</h2>
    <div class="precio-header">
      <span class="tam">Tama√±o</span>
      <span>Incluye 1</span>
      <span>+1 Topping</span>
      <span>+2 Toppings</span>
    </div>
    <div class="precio-item">
      <span class="tam">Peque√±o</span>
      <span>$3.500</span>
      <span>$4.500</span>
      <span>$5.500</span>
    </div>
    <div class="precio-item">
      <span class="tam">Mediano</span>
      <span>$6.500</span>
      <span>$7.500</span>
      <span>$8.500</span>
    </div>
    <div class="precio-item">
      <span class="tam">Grande</span>
      <span>$8.500</span>
      <span>$9.500</span>
      <span>$10.500</span>
    </div>
  </div>
  
  
  

  <form onsubmit="event.preventDefault(); agregarHelado();">
    <label for="nombre">Tu nombre:</label>
    <input type="text" id="nombre" placeholder="Ej: Camila" required>

    <label for="tamano">Tama√±o del Helado:</label>
    <select id="tamano" onchange="actualizarSabores(); actualizarToppings(); actualizarSalsas(); actualizarPrecio();" required>
      <option value="">Selecciona</option>
      <option value="peque√±o">Peque√±o (2 rollos / 1 sabor)</option>
      <option value="mediano">Mediano (4 rollos / hasta 2 sabores)</option>
      <option value="grande">Grande (6 rollos / hasta 2 sabores)</option>
    </select>

    <label for="cantidadToppings">Toppings adicionales:</label>
    <select id="cantidadToppings" onchange="actualizarPrecio(); actualizarToppings()" required>
      <option value="">Selecciona</option>
      <option value="0">0 adicionales (1 incluido)</option>
      <option value="1">1 adicional</option>
      <option value="2">2 adicionales</option>
    </select>

    <p id="precioTotal1"><strong>Precio total:</strong> $0</p> <!-- Nuevo arriba -->

    <label>Selecciona los sabores:</label>
    <div id="saboresContainer" class="sabores-container"></div>
    

    <label>Selecciona los toppings:</label>
    <div id="toppingsContainer" class="sabores-container"></div>

    <label>Selecciona las salsas:</label>
    <div id="salsasContainer" class="sabores-container"></div>


    <div id="mensajeAlerta" style="display: none; color: red; font-weight: bold;"></div>

    <label for="comentario">Comentario (opcional):</label>
    <textarea id="comentario" placeholder="Ej: sin az√∫car, sin leche..."></textarea>

    <p id="precioTotal"><strong>Precio total:</strong> $0</p>

    <button type="submit" class="boton">Agregar helado üç®</button>
    <button type="button" class="boton" onclick="enviarPedido()">Enviar pedido por WhatsApp üì≤</button>
  </form>

  <div class="lista-helados" id="listaHelados"></div>
  <div class="total-general" id="totalGeneral">Total acumulado: $0</div>

<script>
  const sonidoPop = new Audio('pop-39222.mp3');

  const sabores = [
  'ü•≠ Maracuy√°', 'üçì Fresa', 'üçç Pi√±a', 'ü•≠ Mango', '‚òï Caf√©',
  'ü•• Coco', 'üç´ Chocolate', 'üçí Cereza', 'üç¨ Chicle', 'üçã Lim√≥n',
  'üçë Durazno', 'ü•ù Kiwi', 'üçà Guan√°bana', 'ü´ê Mora', '‚ú® Quipitos',
  'üçØ Arequipe', 'üç´ Kinders', 'üç™ Oreo', 'üçπ Pi√±a colada', 'ü•É Crema de whisky',
  'üå∞ Crema de avellanas'
];

const toppingsDisponibles = [
'üçá Moritas', 'üåà Grageas', 'üç¨ Chocomelos', 'üö© Bandera',
'üç´ Chips de chocolate', 'ü•• Coco', 'ü•ú Man√≠', 'üç¨ Chicles',
'ü•ñ Barquillos', 'üç´ Chocokrispis'
];

const salsasDisponibles = [
  'üç´ Chocolate', 'üçí Cereza', 'üçØ Arequipe', 'üç¨ Chicle', 'ü´ê Mora'
];

  const precios = {
    peque√±o: [3500, 4500, 5500],
    mediano: [6500, 7500, 8500],
    grande:  [8500, 9500, 10500]
  };
  const helados = [];

  function actualizarSalsas() {
    const contenedor = document.getElementById('salsasContainer');
    contenedor.innerHTML = "";
    salsasDisponibles.forEach(salsa => {
      const div = document.createElement('div');
      div.className = "sabor";  // ‚úÖ usa la misma clase que sabores y toppings
      div.innerHTML = `<label><input type="checkbox" value="${salsa}" onchange="validarSalsas(this)"> ${salsa}</label>`;
      contenedor.appendChild(div);
    });
  }

  
  function validarSalsas(checkbox) {
    reproducirPop();
    document.querySelectorAll('#salsasContainer .sabor').forEach(div => {
      div.classList.toggle('selected', div.querySelector('input').checked);
    });
  }
  

  function actualizarSabores() {
    const contenedor = document.getElementById('saboresContainer');
    contenedor.innerHTML = "";
    sabores.forEach(sabor => {
      const div = document.createElement('div');
      div.className = "sabor";
      div.innerHTML = `<label><input type="checkbox" value="${sabor}" onchange="validarSabores(this)"> ${sabor}</label>`;
      contenedor.appendChild(div);
    });
  }

  function actualizarToppings() {
    const contenedor = document.getElementById('toppingsContainer');
    contenedor.innerHTML = "";
    toppingsDisponibles.forEach(top => {
      const div = document.createElement('div');
      div.className = "sabor";
      div.innerHTML = `<label><input type="checkbox" value="${top}" onchange="validarToppings(this)"> ${top}</label>`;
      contenedor.appendChild(div);
    });
  }

  function validarSabores(checkbox) {
    const seleccionados = document.querySelectorAll('.sabores-container input:checked');
    const tamano = document.getElementById('tamano').value;
    const max = tamano === 'peque√±o' ? 1 : tamano === 'mediano' ? 2 : 3;
    const alerta = document.getElementById('mensajeAlerta');

    if (seleccionados.length > max) {
      checkbox.checked = false;
      alerta.style.display = "block";
      alerta.textContent = `‚ö†Ô∏è Solo puedes elegir ${max} sabor${max > 1 ? 'es' : ''} para un helado ${tamano}.`;
      setTimeout(() => alerta.style.display = "none", 3000);
    }else {
      // ‚úÖ Solo reproducir sonido si la selecci√≥n fue v√°lida
      reproducirPop();
    }

    document.querySelectorAll('.sabor').forEach(div => {
      div.classList.toggle('selected', div.querySelector('input').checked);
    });
  }

  function validarToppings(checkbox) {
    const seleccionados = document.querySelectorAll('#toppingsContainer input:checked');
    const max = parseInt(document.getElementById('cantidadToppings').value || 0) + 1;
    const alerta = document.getElementById('mensajeAlerta');
  
    if (seleccionados.length > max) {
      checkbox.checked = false;
      alerta.style.display = "block";
      alerta.textContent = `‚ö†Ô∏è Solo puedes seleccionar hasta ${max} topping${max > 1 ? 's' : ''}.`;
      setTimeout(() => alerta.style.display = "none", 3000);
    } else {
    // ‚úÖ Solo reproducir sonido si la selecci√≥n fue v√°lida
    reproducirPop();
  }
  
    document.querySelectorAll('.sabor').forEach(div => {
      div.classList.toggle('selected', div.querySelector('input').checked);
    });
  }



function reproducirPop() {
  sonidoPop.currentTime = 0; // Reinicia por si ya est√° sonando
  sonidoPop.play();
}




  

  function actualizarPrecio() {
    const tamano = document.getElementById('tamano').value;
    const toppingExtra = parseInt(document.getElementById('cantidadToppings').value || 0);
    if (!tamano) {
      document.getElementById('precioTotal').textContent = "Precio total: $0";
      document.getElementById('precioTotal1').textContent = "Precio total: $0";
      return;
    }
    const precioBase = precios[tamano][toppingExtra];
    document.getElementById('precioTotal').textContent = `Precio total: $${precioBase.toLocaleString()}`;
    document.getElementById('precioTotal1').textContent = `Precio total: $${precioBase.toLocaleString()}`;
  }

  function agregarHelado() {
    const tamano = document.getElementById('tamano').value;
    const toppingsCantidad = parseInt(document.getElementById('cantidadToppings').value);
    const saboresSeleccionados = Array.from(document.querySelectorAll('#saboresContainer input:checked')).map(cb => cb.value);
    const toppingsSeleccionados = Array.from(document.querySelectorAll('#toppingsContainer input:checked')).map(cb => cb.value);
    const salsasSeleccionadas = Array.from(document.querySelectorAll('#salsasContainer input:checked')).map(cb => cb.value);
    const comentario = document.getElementById('comentario').value.trim();

    if (!tamano || isNaN(toppingsCantidad) || saboresSeleccionados.length === 0 || toppingsSeleccionados.length === 0) {
      alert("Completa todos los campos y selecciona sabores y toppings.");
      return;
    }

    const precio = precios[tamano][toppingsCantidad];
    helados.push({ tamano, toppingsCantidad, sabores: saboresSeleccionados, toppings: toppingsSeleccionados,  salsas: salsasSeleccionadas, comentario, precio });
    mostrarHelados();

    // Limpiar inputs
    document.getElementById('tamano').value = "";
    document.getElementById('cantidadToppings').value = "";
    document.getElementById('comentario').value = "";
    document.getElementById('precioTotal').textContent = "Precio total: $0";
    document.getElementById('precioTotal1').textContent = "Precio total: $0";
    actualizarSabores();
    actualizarToppings();
    actualizarSalsas();
  }

  function mostrarHelados() {
    const lista = document.getElementById('listaHelados');
    lista.innerHTML = "";
    let total = 0;

    helados.forEach((h, i) => {
      const div = document.createElement('div');
      div.innerHTML = `üç® <b>Helado ${i+1}</b>: ${h.tamano}<br>
        Sabores: ${h.sabores.join(', ')}<br>
        Toppings: ${h.toppings.join(', ')}<br>
        Salsas: ${h.salsas.join(', ')}<br>
        Subtotal: $${h.precio.toLocaleString()}<br>
        ${h.comentario ? 'üìù ' + h.comentario + '<br>' : ''}
        <button onclick="eliminarHelado(${i})">‚ùå Eliminar</button><hr>`;
      lista.appendChild(div);
      total += h.precio;
    });

    document.getElementById('totalGeneral').textContent = `Total acumulado: $${total.toLocaleString()}`;
  }

  function eliminarHelado(index) {
    helados.splice(index, 1);
    mostrarHelados();
  }

  function enviarPedido() {
    const nombre = document.getElementById('nombre').value.trim();
    if (!nombre || helados.length === 0) {
      alert("Por favor ingresa tu nombre y agrega al menos un helado.");
      return;
    }

    let mensaje = `Hola, soy ${nombre}%0AQuiero pedir los siguientes Helados EV:%0A`;
    let total = 0;

    helados.forEach((h, i) => {
      mensaje += `%0A Helado ${i+1}:%0A`;
      mensaje += `- Tama√±o: ${h.tamano}%0A`;
      mensaje += `- Sabores: ${h.sabores.join(', ')}%0A`;
      mensaje += `- Toppings: ${h.toppings.join(', ')}%0A`;
      mensaje += `- Salsas: ${h.salsas.join(', ')}%0A`;
      if (h.comentario) mensaje += `- Comentario: ${h.comentario}%0A`;
      mensaje += `- Subtotal: $${h.precio.toLocaleString()}%0A`;
      total += h.precio;
    });

    mensaje += `%0A Total: $${total.toLocaleString()}`;
    const numeroWhatsApp = "573046553634";
    const url = `https://wa.me/${numeroWhatsApp}?text=${mensaje}`;
    window.open(url, "_blank");

        // Limpiar inputs
        document.getElementById('tamano').value = "";
        document.getElementById('cantidadToppings').value = "";
        document.getElementById('comentario').value = "";
        document.getElementById('precioTotal').textContent = "Precio total: $0";
        document.getElementById('precioTotal1').textContent = "Precio total: $0";
        actualizarSabores();
        actualizarToppings();
        actualizarSalsas();
  }

  // Inicializaci√≥n
  actualizarSabores();
  actualizarToppings();
  actualizarSalsas();
</script>

</body>
</html>
